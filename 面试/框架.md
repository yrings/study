# gRPC

gRPC是RPC的一种**流行实现**，许多组织采取gRPC作为首选RPC机制来连接**数据中心内**和**跨数据中心内**运行的大量微服务。

## gRPC流行的原因？

1. gRPC有蓬勃发展的开发者生态系统，支持多种语言的API。

   该生态系统中使用 protobuf（protocol buffers）作为**数据交换格式**。这个格式是一种与语言和平台无关的机制，用于编码结构化数据。但gRPC也支持JSON格式，但是protobuf一般都是首选。

   protobuf支持**强类型架构定义**——网络上的数据结构在原型文件中定义。它提供广泛的工具支持，将原始文件中的定义的架构转化为所有流行语言的数据访问类。也是在原型文件中确定指定参数和返回值来定义RPC方法。

   使用相同的工具利用proto文件来生成客户端和服务端代码，并使用这些生成的类来进行RPC调用。

   因为支持多种语言，客户端和服务器可以独立选择合适的编程语言。大多数其它传统的RPC框架并发如此。

2. gRPC具有开箱即用的高性能框架。

   高性能体现在两个方面：

   一是使用protobuf作为数据交换格式，它是一种非常高效的二进制编码格式，比JSON快得多。

   二是gRPC构建在HTTP/2上，提供了大规模的高性能基础。（gRPC比JSON快5倍）

   1. 使用单个长期TCP连接发送多个信息流，这使得gRPC框架使用少量TPC连接处理许多并发RPC调用。



## gRPC流程

![](.\img\框架\Screenshot 2024-06-20 105100.png)

gRPC工具生成的客户端代码：client stub--客户端存根。gRPC将传递到客户端存根的数据编码到协议缓冲区并将其发送到低级传输层。gRPC通过HTTP/2 帧流的形式发送数据。

> gRPC这么简单快速为什么没有在Web客户端和Web服务器中广泛使用？

一个原因是gRPC依赖于HTTP/2原语的较低级别的访问，目前没有浏览器支持这种级别，可以通过代理来实现（gRPC-Web）。